(function(e){function t(t){for(var n,i,u=t[0],o=t[1],c=t[2],f=0,h=[];f<u.length;f++)i=u[f],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&h.push(s[i][0]),s[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,u=1;u<a.length;u++){var o=a[u];0!==s[o]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={app:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/nuks-aura-calc/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],o=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"0f17":function(e,t,a){},"76d0":function(e,t,a){"use strict";a("0f17")},cd49:function(e,t,a){"use strict";a.r(t);var n=a("1da1"),s=(a("e623"),a("e379"),a("5dc8"),a("37e1"),a("96cf"),a("7a23"));function r(e,t,a,n,r,i){return Object(s["d"])(),Object(s["b"])("div")}a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("ac1f"),a("5319"),a("5b81");var i=a("3835"),u=(a("4de4"),a("07ac"),a("caad"),a("2532"),a("4fad"),"https://raw.githubusercontent.com/grindinggear/skilltree-export/master/data.json"),o="https://raw.githubusercontent.com/brather1ng/RePoE/master/RePoE/data/",c="gems.min.json",l=["blinding_aura","chaos_degen_aura_unique","vaal_aura_elemental_damage_healing","blood_sand_armour","physical_damage_aura"],f=["32932","9392","12143","55571","65097","57736","6799","33718","34513","36949"],h=["64768","19641","42264","37419","20050","30919","10099","39598","36017","11490","5415","56967","11412","25111"],d={getAuras:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(o+c);case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",Object.values(a).filter((function(e){return!(!e.stat_translation_file.includes("/aura_skill")&&!e.stat_translation_file.includes("/banner_aura_skill"))&&(!e.active_skill.display_name.includes("Vaal")&&(!e.base_item.id.includes("Royal")&&!l.includes(e.active_skill.id)))})));case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getSupportGems:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(o+c);case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",Object.values(a).filter((function(e){return!(!e.base_item||!e.base_item.id)&&!!e.base_item.id.includes("SupportGemGenerosity")})));case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getStatTranslation:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(o+t+".min.json");case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getPassiveTreeNodes:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(u);case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=[],s=[],Object.entries(a.nodes).filter((function(e){var t=Object(i["a"])(e,2),a=t[0],r=t[1];f.includes(a)&&n.push(r),h.includes(a)&&s.push(r)})),e.abrupt("return",{nodes:n,ascNodes:s});case 10:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},p=a("d4ec"),v=a("bee2"),g=(a("7db0"),function e(t,a){var n=this;Object(p["a"])(this,e),this.getAuraStat=function(e){var t=[];return e.static.stats.forEach((function(a){var s;m(a.id)&&(s=e.stat_translation_file.includes("/banner_aura_skill")?n.bannerTranslations.find((function(e){return e.ids.includes(a.id)})):n.translations.find((function(e){return e.ids.includes(a.id)})),t.push(s.English[0].string))})),t},this.getQualityStat=function(e){var t=[],a=-1;return e.static.quality_stats.forEach((function(s){var r;s.set>a&&(a++,t.push([])),r=e.stat_translation_file.includes("/banner_aura_skill")?n.bannerTranslations.find((function(e){return e.ids.includes(s.id)})):n.translations.find((function(e){return e.ids.includes(s.id)})),t[a].push(r.English[0].string)})),t},this.translations=t,this.bannerTranslations=a}),m=function(e){return"base_deal_no_damage"!==e&&("active_skill_base_radius_+"!==e&&!y(e))},y=function(e){return"physical_damage_aura_nearby_enemies_physical_damage_taken_+%_max"===e||!!e.includes("maximum_added_")},b=function(e){return"physical_damage_aura_nearby_enemies_physical_damage_taken_+%"===e||!!e.includes("minimum_added_")},_=function(){function e(t,a,n,s){Object(p["a"])(this,e),this.id=t,this.displayName=s.active_skill.display_name,this.stats=a,this.qualityStats=n,this.statsPerLevel=this.makeStatsPerLevel(s),this.statsPerQuality=this.makeStatsPerQuality(s),this.isBanner=s.stat_translation_file.includes("/banner_aura_skill")}return Object(v["a"])(e,[{key:"makeStatsPerLevel",value:function(e){var t=[],a=0,n=0;return e.static.stats.forEach((function(s){s.value&&0!==s.value?(t.push({value:s.value}),n++):m(s.id)&&(t.push([]),b(s.id)?Object.entries(e.per_level).forEach((function(e,s){t[n].push([e[1].stats[a],e[1].stats[a+1]])})):Object.entries(e.per_level).forEach((function(e,s){t[n].push([e[1].stats[a]])})),n++),a++})),t}},{key:"makeStatsPerQuality",value:function(e){var t=[],a=-1;return e.static.quality_stats.forEach((function(e){e.set>a&&(a++,t.push([])),t[a].push(e.value)})),t}}]),e}(),k=function e(t,a){Object(p["a"])(this,e),this.makeStatsPerLevel=function(e){var t=[];return Object.values(e.per_level).forEach((function(e){t.push(e.stats[0].value)})),t},this.displayName=a.base_item.display_name.replaceAll(" Support",""),this.statsPerLevel=this.makeStatsPerLevel(a)},A=(a("25f0"),a("fb6a"),function(){function e(t,a){Object(p["a"])(this,e),this.id=t,this.displayName=a,this.level=0,this.altQuality=0,this.quality=0,this.generosityLevel=0,this.generosityType=0,this.localAuraEffect=0}return Object(v["a"])(e,[{key:"getStatLines",value:function(e,t,a){var n=this;if(0===this.level)return[];var s=this.auraEffectForGem(t,a),r=this.level,i=[];return e.stats.forEach((function(t,a){var u=t;if(e.statsPerLevel[a].value){var o=e.statsPerLevel[a].value*(1+s/100);o<0&&(u=n.handleNegativeValues(0,u)),u=u.replace("{0}",Math.abs(o).toString())}else e.statsPerLevel[a][r-1].forEach((function(e,t){var r=e.value*(1+s/100);r<0&&(u=n.handleNegativeValues(a,u)),u=u.replace("{".concat(t,"}"),Math.abs(r).toString())}));i.push(u)})),i}},{key:"getQualityStatLines",value:function(e,t,a){var n=this;if(0===this.level||0===this.altQuality||0===this.quality)return[];var s=this.auraEffectForGem(t,a),r=[],i=this.altQuality;return e.qualityStats[i].forEach((function(t,a){var u=e.statsPerQuality[i][a]/100*(1+s/100),o=t;u<0&&(o=n.handleNegativeValues(0,t)),r.push(o.replace("{0}",Math.abs(u).toString()))})),r}},{key:"getGenerosityAuraEffect",value:function(e){var t,a;switch(this.generosityType){case 1:if(this.generosityLevel>40&&(this.generosityLevel=40),this.generosityLevel<=0)break;return(null===(t=e.get("generosity"))||void 0===t?void 0:t.statsPerLevel[this.generosityLevel-1])||0;case 2:if(this.generosityLevel>20&&(this.generosityLevel=20),this.generosityLevel<=0)break;return(null===(a=e.get("awakenedgenerosity"))||void 0===a?void 0:a.statsPerLevel[this.generosityLevel-1])||0}return 0}},{key:"auraEffectForGem",value:function(e,t){return this.localAuraEffect+e+this.getGenerosityAuraEffect(t)}},{key:"handleNegativeValues",value:function(e,t){var a=t.indexOf("{".concat(e,"}"));if(a<0)return t;if(t.slice(a,a+"faster".length+5).includes("faster")){var n=a+"faster".length+5;return t.slice(0,a)+t.slice(a,n).replace("faster","slower")+t.slice(n)}if(t.slice(a,a+"increased".length+5).includes("increased")){var s=a+"increased".length+5;return t.slice(0,a)+t.slice(a,s).replace("increased","decreased")+t.slice(s)}if(t.slice(a,a+"more".length+5).includes("more")){var r=a+"more".length+5;return t.slice(0,a)+t.slice(a).replace("more","less")+t.slice(r)}return t}}]),e}()),S=function(){function e(t){Object(p["a"])(this,e),this.smallNodes=[],t.isNotable?this.notable=t:this.smallNodes.push(t)}return Object(v["a"])(e,[{key:"setNotable",value:function(e){this.notable=e}},{key:"addSmallNode",value:function(e){this.smallNodes.push(e)}}]),e}(),w=a("262e"),O=a("2caf"),N=(a("466d"),a("b0c0"),function e(t){Object(p["a"])(this,e),this.id=t.skill,this.group=t.group,this.name=t.name,this.isNotable=!!t.isNotable,this.active=!1,this.icon=t.icon}),j=function(e){Object(w["a"])(a,e);var t=Object(O["a"])(a);function a(e){var n;return Object(p["a"])(this,a),n=t.call(this,e),n.value=n.getValueFromJSONNode(e.stats),n}return Object(v["a"])(a,[{key:"toggleActive",value:function(){this.active=!this.active}},{key:"getValueFromJSONNode",value:function(e){var t=0;return e.some((function(e){e.match(/(\d*)% increased effect of Non-Curse Auras from your Skills/)&&(t=parseInt(e.match(/(\d*)% increased effect of Non-Curse Auras from your Skills/)[1],10))})),t}}]),a}(N),E=function(){function e(){Object(p["a"])(this,e),this.treeClusters=new Map}return Object(v["a"])(e,[{key:"addNewNode",value:function(e){var t=new j(e);if(this.treeClusters.has(t.group))t.isNotable?this.treeClusters.get(t.group).setNotable(t):this.treeClusters.get(t.group).addSmallNode(t);else{var a=new S(t);this.treeClusters.set(t.group,a)}}},{key:"getNotables",value:function(){var e=[];return this.treeClusters.forEach((function(t){t.notable&&e.push(t.notable)})),e}},{key:"getNotableById",value:function(e){return this.treeClusters.forEach((function(t){if(t.notable&&t.notable.id===e)return t.notable})),null}},{key:"getNotableByGroupId",value:function(e){return this.treeClusters.has(e)?this.treeClusters.get(e).notable:null}},{key:"getSmallNodesForGroup",value:function(e){return this.treeClusters.has(e)?this.treeClusters.get(e).smallNodes:[]}},{key:"reset",value:function(){this.forEachNode((function(e){e.active=!1}))}},{key:"getAuraEffect",value:function(){var e=0;return this.forEachNode((function(t){t.active&&(e+=t.value)})),e}},{key:"forEachNode",value:function(e){this.treeClusters.forEach((function(t){t.notable&&e(t.notable),t.smallNodes.forEach((function(t){e(t)}))}))}}]),e}(),x=(a("00b4"),{auraEffect:/(\d*)% increased effect of Non-Curse Auras from your Skills/,aurasFromSkill:/Auras from your Skills grant \+?([0-9.]*)% [a-zA-Z ]*you and Allies/,takeIncreasedDamage:/take (\d*)% increased Damage/,grantsXOfReservation:/Grants [a-zA-Z ]*(\d*)% of your [a-zA-z ]* and nearby Allies/,youAndNearbyAllies:/(?:N|n)earby Allies (?:deal|have) \+?(\d*)% [a-zA-Z ,]*/,nearbyAlliesSpecial:/Nearby Allies ([a-zA-Z]*) Enemies for 4 seconds on Hit/}),T=function(e){Object(w["a"])(a,e);var t=Object(O["a"])(a);function a(e){var n;return Object(p["a"])(this,a),n=t.call(this,e),n.untranslatedStats=[],n.statTexts=[],n.values=[],n.isAurasFromSkill=[],n.isAuraEffect=[],n.scalesWithReservation=[],n.loadStats(e.stats),n}return Object(v["a"])(a,[{key:"toggleActive",value:function(){this.active=!this.active}},{key:"loadStats",value:function(e){var t=this;e.some((function(e,a){e=e.replace("\n"," "),t.untranslatedStats.push(e),x.auraEffect.test(e)?t.setupAuraEffect(e):x.aurasFromSkill.test(e)?t.setupAurasFromSkill(e):x.takeIncreasedDamage.test(e)?t.setupTakeIncreasedDamage(e):x.grantsXOfReservation.test(e)?t.setupGrantsXOfReservation(e):x.youAndNearbyAllies.test(e)?t.setupYouAndNearbyAllies(e):x.nearbyAlliesSpecial.test(e)&&t.setupNearbyAlliesSpecial(e)}))}},{key:"parseValue",value:function(e){return parseFloat(e[1])}},{key:"setBooleans",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.isAurasFromSkill.push(e),this.isAuraEffect.push(t),this.scalesWithReservation.push(a)}},{key:"setupAuraEffect",value:function(e){this.setBooleans(!1,!0),this.values.push(this.parseValue(e.match(x.auraEffect))),this.statTexts.push(e)}},{key:"setupAurasFromSkill",value:function(e){this.setBooleans(!0),this.values.push(this.parseValue(e.match(x.aurasFromSkill)));var t=e.match(/Auras from your Skills grant (\+?)(?:[0-9.]*)*([a-zA-Z %]*) to you and Allies/);this.statTexts.push(t[1]+"{0}"+t[2])}},{key:"setupTakeIncreasedDamage",value:function(e){this.setBooleans(!1,!1);var t=this.parseValue(e.match(x.takeIncreasedDamage));this.values.push(t),this.statTexts.push("Enemies take ".concat(t,"% increased Damage"))}},{key:"setupGrantsXOfReservation",value:function(e){var t=e.match(/(Life|Mana)/)[1],a=e.match(/(Armour|maximum Energy Shield)/)[1];this.setBooleans(!1,!1,t);var n=this.parseValue(e.match(x.grantsXOfReservation));this.values.push(n),this.statTexts.push("+{0} to ".concat(a))}},{key:"setupYouAndNearbyAllies",value:function(e){this.setBooleans(!1,!1);var t=e.match(/\+?\d*%[a-zA-Z ,]*/),a=this.parseValue(e.match(x.youAndNearbyAllies));this.values.push(a),this.statTexts.push(t[0])}},{key:"setupNearbyAlliesSpecial",value:function(e){this.setBooleans();var t=e.match(x.nearbyAlliesSpecial);this.values.push(0),this.statTexts.push("Nearby Enemies are ".concat(t[1]))}}]),a}(N),L=function(){function e(){Object(p["a"])(this,e),this.ascendancyTrees=new Map,this.ascendancy=null}return Object(v["a"])(e,[{key:"addNewNode",value:function(e){var t=e.ascendancyName.toLowerCase(),a=new T(e);this.ascendancyTrees.has(t)?this.ascendancyTrees.get(t).push(a):this.ascendancyTrees.set(t,[a])}},{key:"getAuraEffect",value:function(){var e=0;return this.forEachNode((function(t){t.active&&t.isAuraEffect.forEach((function(a,n){a&&(e+=t.values[n])}))})),e}},{key:"forEachNode",value:function(e){if(this.ascendancy){var t=this.ascendancyTrees.get(this.ascendancy);t.forEach((function(t){e(t)}))}}}]),e}(),P=Object(s["c"])({name:"App",components:{},data:function(){return{loading:!1,auraStatic:new Map,supportGemsStatic:new Map,passiveTree:new E,ascendancies:new L,playerAuras:new Map}},computed:{globalAuraEffect:function(){return this.passiveTree.getAuraEffect()+this.ascendancies.getAuraEffect()}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,console.log("Loading Auras from RePoE..."),t.next=4,e.loadAuras();case 4:return console.log("Loading Support Gems from RePoE..."),t.next=7,e.loadSupportGems();case 7:return console.log("Loading Tree Data from GGG..."),t.next=10,e.loadTreeData();case 10:console.log("Done!"),e.testAura(),e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},methods:{testAura:function(){var e=this.playerAuras.get("discipline");e.level=2,e.altQuality=2,e.quality=20,console.log(this.playerAuras.get("discipline").getStatLines(this.auraStatic.get("discipline"),0,this.supportGemsStatic)),console.log(this.playerAuras.get("discipline").getQualityStatLines(this.auraStatic.get("discipline"),100,this.supportGemsStatic)),this.ascendancies.ascendancy="necromancer",console.log(this.passiveTree),console.log(this.ascendancies),console.log(this.ascendancies.getAuraEffect())},loadAuras:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.getAuras();case 2:a=t.sent,a.forEach((function(t){var a=t.active_skill.display_name.replaceAll(" ","").toLowerCase();e.auraStatic.set(a,new _(a,e.$getAuraStat(t),e.$getQualityStat(t),t)),e.playerAuras.set(a,new A(a,t.active_skill.display_name))}));case 4:case"end":return t.stop()}}),t)})))()},loadSupportGems:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.getSupportGems();case 2:a=t.sent,a.forEach((function(t){var a=t.base_item.display_name.replaceAll(" ","").replace("Support","").toLowerCase();e.supportGemsStatic.set(a,new k(a,t))}));case 4:case"end":return t.stop()}}),t)})))()},loadTreeData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.getPassiveTreeNodes();case 2:a=t.sent,console.log(a),a.nodes.forEach((function(t){e.passiveTree.addNewNode(t)})),a.ascNodes.forEach((function(t){e.ascendancies.addNewNode(t)}));case 6:case"end":return t.stop()}}),t)})))()}}}),R=(a("76d0"),a("6b0d")),G=a.n(R);const C=G()(P,[["render",r]]);var F=C;d.getStatTranslation("stat_translations/aura_skill").then(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(s["a"])(F),e.next=3,d.getStatTranslation("stat_translations/banner_aura_skill");case 3:n=e.sent,r=new g(t,n),a.config.globalProperties.$getAuraStat=function(e){return r.getAuraStat(e)},a.config.globalProperties.$getQualityStat=function(e){return r.getQualityStat(e)},a.mount("#app");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}});
//# sourceMappingURL=app.357d52cc.js.map